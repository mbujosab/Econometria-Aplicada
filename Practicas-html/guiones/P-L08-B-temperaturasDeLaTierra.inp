

# Los dos primeros comandos son necesarios para que Gretl guarde los resultados de la práctica en el directorio de trabajo
# al ejecutar lo siguiente desde un terminal (use los nombres y ruta que correspondan)
#
#    DIRECTORIO="Nombre_Directorio_trabajo" gretlcli -b ruta/nombre_fichero_de_la_practica.inp
#
# Si esto no le funciona en su sistema, comente las siguientes dos líneas y sitúese en el directorio de trabajo de gretl
# que corresponda (configure dicho directorio de trabajo desde la ventana principal de Gretl).

string directory = getenv("DIRECTORIO")
set workdir "@directory"

open ../../datos/tempmundo.csv
setobs 12 1881:01
setinfo Temperature_Deviations --description="Temperaturas mensuales en desviaciones respecto a la media calculada entre los años 1951 y 1975"

DesvTemp <- gnuplot Temperature_Deviations --time-series --with-lines  --output="Temperaturas.png"

diff Temperature_Deviations

Dif_DesvTemp <- gnuplot d_Temperature_Deviations --time-series --with-lines --output="Dif_Temperaturas.png"

corrgm d_Temperature_Deviations 31 --plot="Dif_Temperature_Deviations-ACF-PACF.png"

outfile --quiet d_Temperature-ACF-PACF.txt
  corrgm d_Temperature_Deviations 12 --quiet
end outfile

ARIMA011 <- arima 0 1 1 ; Temperature_Deviations

outfile --quiet ARIMA011.txt
  ARIMA011 <- arima 0 1 1 ; Temperature_Deviations
end outfile

residuosARIMA011 = $uhat
corrgm residuosARIMA011 --plot="residuosARIMA011-ACF-PACF.png"

outfile --quiet CorrelogramaARIMA011.txt
  corrgm residuosARIMA011 12 --quiet
end outfile

ARIMA013 <- arima 0 1 3 ; Temperature_Deviations --nc

outfile --quiet ARIMA013.txt
  ARIMA013 <- arima 0 1 3 ; Temperature_Deviations --nc
end outfile

residuosARIMA013 = $uhat
corrgm residuosARIMA013 12 --plot="residuosARIMA013-ACF-PACF.png"

outfile --quiet CorrelogramaARIMA013.txt
  corrgm residuosARIMA013 12 --quiet
end outfile

smpl 1881:01 2001:12
ARIMA013_2001 <- arima 0 1 3 ; Temperature_Deviations --nc

fcast 2000:01 2002:12 --plot="prediccion2002.png"

outfile --quiet Predicciones.txt
  fcast --out-of-sample
end outfile
